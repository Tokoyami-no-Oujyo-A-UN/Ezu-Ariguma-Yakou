<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>旧端末用キャラクター巻物</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  overflow-x: auto;
  overflow-y: hidden;
  height: 100%;
  font-family: sans-serif;
  white-space: nowrap;
}

#scroll-container {
  display: inline-block;
  height: 100%;
}

#scroll-container a {
  display: inline-block;
  height: 100%;
}

#scroll-container img {
  height: 100%;
  width: auto;
  vertical-align: middle;
}

.nav-container {
  position: fixed;
  bottom: 15px;
  left: 15px;
  display: flex;
  gap: 15px;
  z-index: 999;
}

.nav-container a img {
  width: 50px;
  height: 50px;
  display: block;
  cursor: pointer;
}

#detail-panel {
  position: fixed;
  top: 4%;
  left: 4%;
  width: 92%;
  max-height: 40%;
  background-color: rgba(0,0,0,0.7);
  color: #fff;
  padding: 10px;
  overflow-y: auto;
  border-radius: 8px;
  display: none;
  z-index: 1000;
  line-height: 1.3;
}

#detail-close {
  position: absolute;
  top: 5px;
  right: 5px;
  width: 30px;
  height: 30px;
  cursor: pointer;
}
</style>
</head>
<body>

<div id="scroll-container">
  <a name="01"></a><img src="01.png" alt="キャラ1">
  <a name="02"></a><img src="02.png" alt="キャラ2">
  <a name="03"></a><img src="03.png" alt="キャラ3">
  <a name="04"></a><img src="04.png" alt="キャラ4">
</div>

<div id="detail-panel">
  <div id="detail-close"><img src="0moji_cl.png" style="width:100%;height:100%;"></div>
  <div id="detail-text"></div>
</div>

<div class="nav-container">
  <a href="#01" id="left"><img src="0left.png" alt="左へ"></a>
  <a href="#02" id="right"><img src="0right.png" alt="右へ"></a>
  <a href="#detail" id="detail-toggle"><img src="0moji_op.png" alt="詳細"></a>
</div>

<script>
// キャラごとの txt
const charMap = {
  "01":"01.txt",
  "02":"02.txt",
  "03":"03.txt",
  "04":"04.txt"
};

const detailPanel = document.getElementById('detail-panel');
const detailText = document.getElementById('detail-text');
const detailClose = document.getElementById('detail-close');
let txtOpen = false;

// 詳細表示
document.getElementById('detail-toggle').addEventListener('click',()=>{
  if(txtOpen){ closeDetail(); } else { openDetail('01'); } // 初期は01表示
});
detailClose.addEventListener('click', closeDetail);

function openDetail(num){
  txtOpen = true;
  fetch(charMap[num])
    .then(res=>res.text())
    .then(data=>{
      detailText.innerText = data;
      detailPanel.style.display = 'block';
    });
}

function closeDetail(){
  txtOpen=false;
  detailPanel.style.display='none';
  detailText.innerText='';
}

// アンカークリック時に画像中央にスクロール
document.querySelectorAll('a[name]').forEach(anchor=>{
  anchor.parentElement.addEventListener('click', e=>{
    e.preventDefault();
    const rect = anchor.nextElementSibling.getBoundingClientRect();
    const offset = rect.left + window.scrollX - window.innerWidth/2 + rect.width/2;
    window.scrollTo({left: offset, behavior:'auto'});
  });
});
</script>
</body>
</html>
